import{P as h}from"./Post.9f83cc6d.js";import{_ as p,d as m,m as u,c as n,F as i,f,u as _,o as a,b as y,w,g as s,t as c,r as g}from"./index.22295eb8.js";import{p as l}from"./postApi.5e326f0e.js";const k=m({props:{isOwner:{type:Boolean}},data(){return{posts:[],fetched:0,allFetched:!1}},components:{PostVue:h},async mounted(){console.log("hey"),await this.fetchPosts()},async beforeRouteUpdate(){await this.fetchPosts()},computed:{...u(_)},methods:{postClick(t){const o=this.posts[t];this.mainStore.temporaryPost=o,this.$router.push(`/post/${o.contentId}`)},async fetchPosts(){const{data:t}=await l.get(`/posts?isOwner=${this.isOwner}`);this.posts=t,this.fetched=t.length},async fetchMore(){if(this.allFetched)return;const{data:t}=await l.get(`/posts?isOwner=${this.isOwner}&skip=${this.fetched}`);if(t.length!==0){this.fetched=this.fetched+t.length,this.posts.push(...t);return}this.allFetched=!0}}}),b={class:"mt-3 ml-1 mb-5"},v={class:"avatar float-left mt-2"},C={class:"rounded-full"},P=["innerHTML"],$={class:"ml-12 mt-1"},x={class:"text-base-content -my-1 ml-2 mb-1 text-xl"},B={class:"ml-2"},F={key:1,class:"h-10 rounded-xl m-auto mt-8 text-primary-content text-center bg-primary"},M=s("p",{class:"pt-2 font-semibold"}," No more posts left to show ",-1),S=[M];function O(t,o,V,I,L,T){const d=g("PostVue");return a(),n(i,null,[(a(!0),n(i,null,f(t.posts,(e,r)=>(a(),y(d,{post:e,postIndex:r,type:"Read",postClick:()=>t.postClick(r)},{default:w(()=>[s("div",b,[s("div",v,[s("div",C,[s("div",{innerHTML:e.user.avatar,class:"text-xl"},null,8,P)])]),s("div",$,[s("p",x,c(e.user.name),1),s("p",B,c(new Date(e.dateCreated).toUTCString()),1)])])]),_:2},1032,["post","postIndex","postClick"]))),256)),t.allFetched?(a(),n("div",F,S)):(a(),n("button",{key:0,class:"btn btn-primary mt-5",onClick:o[0]||(o[0]=(...e)=>t.fetchMore&&t.fetchMore(...e))},"Show More"))],64)}var R=p(k,[["render",O]]);export{R as default};
