import{_ as g,d as f,L as w,M as y,N as E,E as S,G as v,u as m,O as V,P as u,c as x,a,w as i,r,o as F,g as s,Q as p,n as h}from"./index.22295eb8.js";const M=f({name:"Login",components:{VeeForm:w,VeeField:y,ErrorMessage:E,ErrorVue:S},setup(){const e=v();return{store:m(),...e}},data(){return{schema:V().shape({password:u().min(8).max(40).required().label("Password"),email:u().email().required().label("Email address").max(60)}),fieldStyle:"input text-base-content",errorStyle:"text-lg ml-1 text-primary mt-2 mb-3"}},methods:{async submit(e){var o;this.handleSubmit("Loggin You In...");try{await this.store.logIn(e,this.$router),this.handleSuccess("Success")}catch(t){const l=t;if(console.log(l.response),((o=l.response)==null?void 0:o.status)===401){this.handleError("Incorrect credentials");return}this.handleError("Something went wrong! Please try again later")}}},beforeRouteEnter(e,o,t){if(!m().isLoggedIn)return t();t("/")}}),$={class:"mx-5 md:mx-24 lg:mx-auto lg:w-1/3 my-48"},L={class:"form-control"},I=s("label",{class:"label"},[s("span",{class:"label-text"},"Email")],-1),P={class:"form-control"},C=s("label",{class:"label"},[s("span",{class:"label-text"},"Password")],-1),B={class:"relative"},N=["disabled"];function k(e,o,t,l,q,z){const b=r("ErrorVue"),c=r("VeeField"),d=r("ErrorMessage"),_=r("VeeForm");return F(),x("div",$,[a(b,{variant:e.variant,show:e.show,style:{},textMsg:e.textMsg},null,8,["variant","show","textMsg"]),a(_,{onSubmit:e.submit,"validation-schema":e.schema,class:"p-5 card md:bg-base-200 pb-28"},{default:i(()=>[a(c,{name:"email"},{default:i(({field:n})=>[s("div",L,[I,s("input",p(n,{type:"text",placeholder:"email",class:e.fieldStyle}),null,16)])]),_:1}),a(d,{class:h(e.errorStyle),name:"email"},null,8,["class"]),a(c,{name:"password"},{default:i(({field:n})=>[s("div",P,[C,s("input",p(n,{type:"text",placeholder:"password",class:e.fieldStyle}),null,16)])]),_:1}),a(d,{class:h(e.errorStyle),name:"password"},null,8,["class"]),s("div",B,[s("button",{class:"absolute top-0 left-1/4 rounded-md mt-8 w-1/2 btn btn-primary",disabled:e.inSubmission}," Login In ",8,N)])]),_:1},8,["onSubmit","validation-schema"])])}var O=g(M,[["render",k]]);export{O as default};
